# java中的类的设计原则  

- 内聚性

  类应该描述一个单一的实体，而所有的类操作应该在逻辑上相互配合，支持一个一致的目的。例如：可以设计一个类用于学生，但不应该将学生与教职工组合在一个类中，因为学生和教职工是不同的实体。如果一个实体担负太多的职责，就应该按各自的职责分成几个类。例如：String类、StringBuffer类和 StringBuilder类用于处理字符串，但是他们的职责不同。String类处理不变的字符串，StringBuilder类创建可变字符串， StringBuffer() 与 StringBuffer() 类还包含更新字符串的同步方法。

- 一致性

  遵循标准java程序设计风格和命名习惯。为类、数据域和方法选取具有信息的名字。通常的风格是将数据声明置于构造方法之前，并且将构造方法置于方法之前。

  选择名字要保持一致。给类似的操作选择不同的名字并非良好的实践。例如：Length() 方法返回String、StringBuilder 和 StringBuffer 的大小。如果在这些类中给这个方法用不同的名字就不一致了。

  一般来说，应该具有一致性地提供一个公共无参的构造函数，用于构建默认实例。如果一个类不支持无参的构造函数，要用文档写出原因。如果没有显示定义构造方法，即假定有一个空方法体的公共默认无参构造方法。

  如果不想让用户创建类的对象，可以在类中声明一个私有的构造方法，Math类就是如此。

- 封装性

  一个类应该使用private修饰符隐藏其数据，以免用户直接访问它。这使得类更易于维护。只在希望数据域可读的情况下，才提供get方法；也只在希望数据域可更新的情况下，才提供set方法。例如：Rational类为numerator和denominator提供了get方法，但是没有提供set方法，因为Rational对象是不可改变的。

- 清晰性

  为使设计清晰，内聚性、一致性和封装性都是很好的设计原则。除此之外，类应该有一个很清晰的合约，从而易于解释和理解。

  用户可以以各种不同的组合、顺序，以及在各种环境中结合使用多个类。因此，在设计一个类时，这个类不应该限制用户如何以及何时使用该类；以一种方式设计属性，以允许用户按值的任何顺序和任何组合来设置；设计方法应该使得实现的功能与他们出现的顺序无关。例如：Loan类包含属性loanAmount、numberOfYears和annualIntereRate，这些属性的值，可以按任何顺序来设置。

  方法应在不生产混淆的情况下进行直观定义。例如：String类中的substring（int beginIndex， int endIndex）方法就有一点混乱。这个方法返回从beginIndex到endIndex-1而不是endIndex的子串。该方法应该返回从beginIndex到endIndex的子字符串，从而更加直观。

  不应该声明一个来自其他数据域的数据域。例如，下面的Person类有两个数据域：birthDate和age。由于age可以从birthDate导出，所以age不应该声明为数据域。

- 完整性

  类是为许多不同用户的使用而设计的。为了能在一个广泛的应用中使用，一个类应该通过属性和方法提供多种方案以适应用户的不同需求。例如：为了满足不同的应用需求，String类包含了40多种很实用的方法。  

- 实例和静态

  依赖于类的具体实例的变量或方法必须是一个实例变量或者方法。如果一个变量被类的所有实例所共享，那就应该将它声明为静态的。如果方法不依赖于某和具体的实例，那就应该将他声明为静态方法。

  应该总是使用类名（而不是引用变量）引用静态变量和方法，以增强可读性并避免错误。

  不要在构造方法中传入参数来初始化静态数据域。最好使用set方法改变静态数据域。

  构造方法永远都是实例方法，因为它是用来创建具体实例的。一个静态变量或方法可以从实例方法中调用，但是不能从静态方法中调用实例变量或方法。

- 继承和聚合

  继承和聚合之间的差异，就是 is-a（是一种） 和 has-a（具有）之间的关系。例如，苹果是一种水果；因此，可以使用继承来对Apple类和Fruit类之间的关系进行建模。人具有名字；因此，可以使用聚合来对Person类和Name类之间的关系建模。

- 接口和抽象类

  接口和抽象类都可以用于为对象指定共同的行为。如何决定是采用接口还是类呢》通常，比较强的is-a （是一种）关系清晰的描述了父子关系，应该采用类来建模。例如，因为橘子是一种水果，他们的关系就应该采用类的继承关系来建模。弱的is-a关系，也成为is-kind-of （是一类）关系，表示一个对象拥有某种属性。弱的is-a关系可以使用接口建模。例如所有的字符串都是可以比较的，因此String类实现了Comparable接口。圆或者矩形是一个几何对象，因此Circle可以设计为GeometricObject的子类。圆有不同的半径，并且可以基于半径比较，因此Circle可以实现Comparable接口。

  接口比抽象类更加灵活，因为一个子类只能继承一个父类，但是却可以实现任意个数的接口。然而，接口不嗯能够具有具体的方法。可以结合接口和抽象的优点，创建一个接口。使用一个抽象类来实现它。可以视其方便使用接口或者抽象类。