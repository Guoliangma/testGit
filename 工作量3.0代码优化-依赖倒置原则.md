# 定义
依赖倒置，就是依赖于抽象，而不是依赖实现。

- 高层模块不应该依赖底层模块，两周都应该依赖其抽象
- 抽象不因该依赖细节
- 细节应该依赖抽象


# 实例
干警下钻页面 服务器端逻辑类

### 重构前代码

```java
public class Gjxzym {

    /**
     * 统计分析Service
     */
    @Autowired
    private TjfxService tjfxService;

    /**
     * 数据源查询方法
     * 
     * @param qp
     *            查询参数，只在分页查询时可用，否则为null
     * @return Object 当为分页查询时，需要返回IPagableData对象，否则可为任意pojo
     */
    public Object ds_rs1(IQueryInfo qp) {
        TjfxParam tjfxParam = TjfxUtil.createGjXzParam();
        return tjfxService.getGjXzRyGzlxx(tjfxParam, qp);
    }

}
```

问题：依赖的TjfxService 不是接口，实现类应该依赖于接口，如果功能有拓展就可以增加实现类来解决。

### 重构后代码

- 规则

```java
public class Gjxzym {

    /**
     * 统计分析Service
     */
    @Autowired
    private ITjfxService tjfxService;

    /**
     * 数据源查询方法
     * 
     * @param qp
     *            查询参数，只在分页查询时可用，否则为null
     * @return Object 当为分页查询时，需要返回IPagableData对象，否则可为任意pojo
     */
    public Object ds_rs1(IQueryInfo qp) {
        TjfxParam tjfxParam = TjfxUtil.createGjXzParam();
        return tjfxService.getGjXzRyGzlxx(tjfxParam, qp);
    }

}
```

### 总结 

依赖正置，就是依赖实现，依赖倒置则反之，6个设计原则中，DIP是最难实现的。他是开闭原则的重要途径。




